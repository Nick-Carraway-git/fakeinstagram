<%# ログイン時(フォローしている人/フォロワーしている人の投稿一覧) %>
<div class="after-login-home">
  <% if user_signed_in? %>
    <%= render 'shared/flash_messages' %>
    <% if @following_users != nil %>
      <div class="following-box">
        <% @following_users.each do |user| %>
          <%= render 'users/following_users_box', user: user %>
        <% end %>
      </div>
    <% end %>
    <ol class="microposts">
      <div class="row microposts-box">
        <% @home_microposts.each do |micropost| %>
          <button type="button" class="mordal-button col-4" data-toggle="modal" data-target="#mordal-<%= micropost.id %>">
            <%= image_tag micropost.image.variant(combine_options:{resize:"900x900^",crop:"900x900+0+0",gravity: :center}).processed, class: "thumbnail img-thumbnail" %>
          </button>
          <% @mordal_micropost = micropost %>
          <ol class="microposts">
            <%= render 'microposts/micropost_mordal', micropost: @mordal_micropost %>
          </ol>
        <% end %>
      </div>
    </ol>
  <% else %>
</div>

<%# 非ログイン時(LP/ログインフォーム) %>
<div class="before-login-home">
  <div class="row d-flex align-items-center">
    <div class="d-none d-lg-block col-lg-6">
      <%= image_tag 'phone.png', class: "img-fluid phone" %>
    </div>

    <div class="col-lg-6">
      <div class="container-login">
        <div class="form-parts">
          <h1>Fakeinst</h1>
          <%= render 'shared/flash_messages' %>

          <%= form_with model: @user, url: user_session_path, local: true do |f| %>
            <div class="form-group">
              <%#= f.label :email %>
              <%= f.email_field :email, autofocus: true, autocomplete: 'email', placeholder: 'メールアドレス', class: 'form-control' %>
            </div>

            <div class="form-group">
              <%#= f.label :password %>
              <%= f.password_field :password, autocomplete: 'current-password', placeholder: 'パスワード', class: 'form-control' %>
            </div>

            <% if devise_mapping.rememberable? %>
              <div class="form-group form-check">
                <%= f.check_box :remember_me, class: 'form-check-input' %>
                <%= f.label :remember_me, class: 'form-check-label' do %>
                  <%= resource.class.human_attribute_name('remember_me') %>
                <% end %>
              </div>
            <% end %>

            <div class="form-group">
              <%= f.submit "ログイン", class: 'btn btn-primary btn-block' %>
            </div>
          <% end %>

          <%= render 'devise/shared/links' %>
        </div>
      </div>
    </div>
  </div>
</div>
<% end %>
